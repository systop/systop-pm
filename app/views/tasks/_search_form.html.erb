<%= search_form_for @q, url: project_path(@project.id), html: {class: "form-inline", role: "form"} do |form| %>
      <div class="field">
        <%= form.label :project_id_eq, hidden: true %>
        <%= form.search_field :project_id_eq, value: @project.id, readonly: true, hidden: true %>
      </div>
      <div class="input-group">
        <% if params[:controller] == 'projects' %>
          <%= link_to 'New task', new_task_path(project_id: @project.id), class: 'btn btn-success' %>
        <% elsif params[:controller] == 'tasks' %>
          <%= link_to 'New Subtask', new_task_path(project_id: @task.project.id, parent_task_id: @task.id), class: 'btn btn-success btn-sm' %>
        <% end %>
      </div>
      <div class="input-group">
        <span class="input-group-addon"><strong>Title contains</strong></span>
        <%= form.label :title_cont, class: 'sr-only' %>
        <% if params[:q] %>
          <%= form.search_field :title_cont, value: params[:q][:title_cont], class: 'form-control' %>
        <% else %>
          <%= form.search_field :title_cont, value: '', class: 'form-control' %>
        <% end %>
        <span class="input-group-btn">
          <button class="btn btn-default" type="button" onclick="$('#q_title_cont')[0].value = '';">x</button>
        </span>
      </div>
      <div class="input-group">
        <span class="input-group-addon"><strong>Status in</strong></span>
        <%= form.label :status_in, class: 'sr-only' %>
        <%= form.collection_check_boxes(:status_in, @project.tasks.pluck(:status).uniq, :to_s, :to_s ) do |c| %>
            <span class="input-group-addon">
              <%= c.check_box %>
              <%= c.value %>
            </span>
        <% end %>
        <span class="input-group-btn">
          <button class="btn btn-default" type="button" onclick="clearStatuses()">x</button>
        </span>
       </div>
      <%# raise 'f' %>
      <%= form.submit class: 'btn' %>
    <% end %>